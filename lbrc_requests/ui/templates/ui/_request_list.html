{% macro render(requests, is_owner) %}

<ul class="list-group">
    {% for r in requests.items %}
        <li class="list-group-item">
            <div class='summary_details'>
                <header class="row">
                    <div class="col-7">
                        <h1>{{r.request_type.name}}: {{ r.name }}</h1>
                        <h2>For <a href="mailto:{{r.requestor.email}}">{{r.requestor.full_name }}</a> created {{ r.created_date | datetime_humanize }}</h2>
                    </div>
                    <div class="col-5">
                        <div class="btn-group float-right" role="group">
                            {% if is_owner %}
                                <button id="btnGroupDrop1"
                                    type="button"
                                    class="btn btn-primary dropdown-toggle"
                                    data-toggle="dropdown"
                                    aria-haspopup="true"
                                    aria-expanded="false"
                                >
                                    {{ r.current_status_type.name }}
                                </button>
                                <div class="dropdown-menu" aria-labelledby="btnGroupDrop1">
                                    <a class="dropdown-item"
                                        data-toggle="modal"
                                        data-request-id="{{ r.id }}"
                                        data-current-status-type-id="{{ r.current_status_type.id }}"
                                        data-name="{{ r.name }}"
                                        data-target="#updateStatusModal"
                                        href="#">Update Status</a>
                                    <a class="dropdown-item"
                                        data-toggle="modal"
                                        data-request-id="{{ r.id }}"
                                        data-name="{{ r.name }}"
                                        data-target="#showStatusHistoryModal"
                                        href="#">Show History</a>
                                </div>
                            {% else %}
                                <span class="float-right badge badge-primary">{{ r.current_status_type.name }}</span>
                            {% endif %}
                        </div>
                    </div>
                </header>
                <div class="row">
                    <dl class="col-12 col-md">
                        {% for d in r.data %}
                            <dt>{{ d.field.field_name }}</dt>
                            <dd>{{ d.formated_value }}</dd>
                        {% endfor %}
                    </dl>

                    {% if r.files | length > 0 %}
                        <div class="col-12 col-md">
                            <h3>Attachments</h3>
                            <div>
                                {% for f in r.files %}
                                    <a class='download' href="{{ url_for('ui.download_request_file', request_id=r.id, request_file_id=f.id) }}"><span class="glyphicon glyphicon-download" aria-hidden="true"></span> {{ f.filename }}</a>
                                {% endfor %}
                            </div>
                        </div>
                    {% endif %}
                </div>
            </div>
        </li>
    {% endfor %}
</ul>

{% endmacro %}